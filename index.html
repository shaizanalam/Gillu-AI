<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡§ó‡§ø‡§≤‡•ç‡§≤‡•Ç - Hindi/English Voice Assistant</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Noto Sans Devanagari', sans-serif;
      background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      padding: 20px;
      overflow-x: hidden;
      position: relative;
    }

    #wallpaper-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      background: radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                  radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.15) 0%, transparent 50%),
                  radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.1) 0%, transparent 50%);
    }

    .main-content {
      display: flex;
      justify-content: center;
      align-items: center;
      flex: 1;
      width: 100%;
      padding: 20px 0;
    }

    .container_chat_bot {
      display: flex;
      flex-direction: column;
      max-width: 500px;
      width: 100%;
      background: rgba(20, 20, 30, 0.85);
      backdrop-filter: blur(15px);
      border-radius: 24px;
      padding: 24px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.08);
      position: relative;
      overflow: hidden;
    }

    .container_chat_bot::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    }

    .header {
      text-align: center;
      margin-bottom: 20px;
      color: white;
      position: relative;
    }

    .header h1 {
      font-size: 26px;
      margin-bottom: 8px;
      background: linear-gradient(90deg, #6a11cb 0%, #2575fc 50%, #6a11cb 100%);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      color: transparent;
      background-size: 200% auto;
      animation: shimmer 3s linear infinite;
    }

    .header p {
      font-size: 14px;
      opacity: 0.8;
      font-weight: 400;
    }

    /* Normal Bot Face Styles */
    .bot-face-container {
      display: flex;
      justify-content: center;
      margin: 15px 0;
    }

    .bot-face {
      width: 180px;
      height: 180px;
      background: radial-gradient(circle at 30% 30%, #3a3f5b, #2a2f4a);
      border-radius: 50%;
      margin: 0 auto;
      position: relative;
      box-shadow: 
          0 0 30px rgba(123, 97, 255, 0.4),
          inset 0 0 30px rgba(0, 0, 0, 0.5);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      transition: all 0.5s ease;
    }

    .bot-face::before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: radial-gradient(circle at 50% 0%, rgba(123, 97, 255, 0.6), transparent 70%);
      opacity: 0.6;
      animation: glow 4s infinite alternate;
    }

    .eyes-container {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin-top: 30px;
      position: relative;
      z-index: 2;
    }

    .eye {
      width: 40px;
      height: 55px;
      background: linear-gradient(to bottom, #1a1a2e, #0f3460);
      border-radius: 50%;
      position: relative;
      overflow: hidden;
      box-shadow: 
          inset 0 -5px 10px rgba(0, 0, 0, 0.7),
          0 0 15px rgba(123, 97, 255, 0.6);
      display: flex;
      justify-content: center;
      align-items: center;
      transition: all 0.3s ease;
    }

    .pupil {
      width: 20px;
      height: 20px;
      background: radial-gradient(circle at 30% 30%, #7b61ff, #4a3f9e);
      border-radius: 50%;
      position: relative;
      box-shadow: 0 0 10px rgba(123, 97, 255, 0.8);
      transition: all 0.2s ease;
    }

    .pupil::after {
      content: '';
      position: absolute;
      width: 6px;
      height: 6px;
      background: rgba(255, 255, 255, 0.8);
      border-radius: 50%;
      top: 4px;
      left: 4px;
    }

    .cheeks {
      display: flex;
      justify-content: center;
      gap: 50px;
      margin-top: 10px;
      position: relative;
      z-index: 2;
    }

    .cheek {
      width: 25px;
      height: 12px;
      background: radial-gradient(ellipse, rgba(255, 105, 180, 0.4), transparent 70%);
      border-radius: 50%;
      opacity: 1;
      transition: opacity 0.5s ease;
    }

    .face-status {
      margin-top: 15px;
      font-size: 1rem;
      color: #a8e6cf;
      height: 20px;
      transition: all 0.3s ease;
      font-weight: 500;
    }

    .pulse {
      display: inline-block;
      width: 8px;
      height: 8px;
      background: #a8e6cf;
      border-radius: 50%;
      margin-right: 6px;
      animation: pulse 2s infinite;
    }

    @keyframes glow {
      0% {
        opacity: 0.4;
        transform: scale(1);
      }
      100% {
        opacity: 0.8;
        transform: scale(1.05);
      }
    }

    @keyframes pulse {
      0% {
        box-shadow: 0 0 0 0 rgba(168, 230, 207, 0.7);
      }
      70% {
        box-shadow: 0 0 0 10px rgba(168, 230, 207, 0);
      }
      100% {
        box-shadow: 0 0 0 0 rgba(168, 230, 207, 0);
      }
    }

    @keyframes blink {
      0%, 100% {
        transform: scaleY(1);
      }
      50% {
        transform: scaleY(0.1);
      }
    }

    .blink {
      animation: blink 0.3s ease;
    }

    .happy .eyes {
      transform: scaleY(0.7);
    }

    .thinking .eyes {
      transform: scaleY(0.5);
    }

    .chat-history {
      background: rgba(30, 30, 40, 0.7);
      border-radius: 18px;
      padding: 18px;
      margin-bottom: 18px;
      max-height: 250px;
      min-height: 120px;
      overflow-y: auto;
      color: white;
      border: 1px solid rgba(255, 255, 255, 0.05);
      scroll-behavior: smooth;
    }

    .chat-history::-webkit-scrollbar {
      width: 6px;
    }

    .chat-history::-webkit-scrollbar-track {
      background: transparent;
    }

    .chat-history::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.2);
      border-radius: 3px;
    }

    .chat-history::-webkit-scrollbar-thumb:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    .chat-history .message {
      margin-bottom: 16px;
      padding: 12px 16px;
      border-radius: 18px;
      max-width: 85%;
      word-wrap: break-word;
      animation: fadeIn 0.4s ease;
      position: relative;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .chat-history .user-message {
      background: linear-gradient(135deg, rgba(37, 117, 252, 0.25), rgba(37, 117, 252, 0.15));
      margin-left: auto;
      border-bottom-right-radius: 6px;
      border: 1px solid rgba(37, 117, 252, 0.3);
    }

    .chat-history .bot-message {
      background: linear-gradient(135deg, rgba(106, 17, 203, 0.25), rgba(106, 17, 203, 0.15));
      margin-right: auto;
      border-bottom-left-radius: 6px;
      border: 1px solid rgba(106, 17, 203, 0.3);
    }

    .chat-history .message-time {
      font-size: 10px;
      opacity: 0.6;
      margin-top: 6px;
      text-align: right;
    }

    .container-chat-options {
      position: relative;
      display: flex;
      background: linear-gradient(
        135deg,
        rgba(42, 42, 52, 0.9),
        rgba(26, 26, 36, 0.9)
      );
      border-radius: 18px;
      padding: 2px;
      overflow: hidden;
      margin-bottom: 18px;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    }

    .container-chat-options::after {
      position: absolute;
      content: "";
      top: -10px;
      left: -10px;
      background: radial-gradient(
        ellipse at center,
        #ffffff,
        rgba(255, 255, 255, 0.3),
        rgba(255, 255, 255, 0.1),
        rgba(0, 0, 0, 0),
        rgba(0, 0, 0, 0),
        rgba(0, 0, 0, 0),
        rgba(0, 0, 0, 0)
      );
      width: 30px;
      height: 30px;
      filter: blur(1px);
      z-index: 1;
    }

    .container-chat-options::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), transparent);
      z-index: -1;
      border-radius: 18px;
    }

    .chat {
      display: flex;
      flex-direction: column;
      background-color: rgba(10, 10, 20, 0.9);
      border-radius: 16px;
      width: 100%;
      overflow: hidden;
      position: relative;
      z-index: 2;
    }

    .chat-bot {
      position: relative;
      display: flex;
    }

    .chat-bot textarea {
      background-color: transparent;
      border-radius: 16px;
      border: none;
      width: 100%;
      height: 70px;
      color: #ffffff;
      font-family: 'Noto Sans Devanagari', sans-serif;
      font-size: 15px;
      font-weight: 400;
      padding: 16px;
      resize: none;
      outline: none;
      line-height: 1.5;
    }

    .chat-bot textarea::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    .chat-bot textarea::-webkit-scrollbar-track {
      background: transparent;
    }

    .chat-bot textarea::-webkit-scrollbar-thumb {
      background: #444;
      border-radius: 4px;
    }

    .chat-bot textarea::-webkit-scrollbar-thumb:hover {
      background: #666;
      cursor: pointer;
    }

    .chat-bot textarea::placeholder {
      color: #888;
      transition: all 0.3s ease;
    }

    .chat-bot textarea:focus::placeholder {
      color: #555;
    }

    .options {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 16px;
    }

    .btn-mic {
      display: flex;
      padding: 3px;
      background: linear-gradient(to top, #1a1a2a, #333344, #1a1a2a);
      border-radius: 12px;
      box-shadow: inset 0 6px 2px -4px rgba(255, 255, 255, 0.1),
                  0 4px 6px rgba(0, 0, 0, 0.2);
      cursor: pointer;
      border: none;
      outline: none;
      transition: all 0.2s ease;
      position: relative;
      overflow: hidden;
    }

    .btn-mic::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), transparent);
      opacity: 0;
      transition: opacity 0.3s;
    }

    .btn-mic:hover::before {
      opacity: 1;
    }

    .btn-mic i {
      width: 36px;
      height: 36px;
      padding: 8px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 10px;
      backdrop-filter: blur(3px);
      color: #888;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .btn-mic svg {
      transition: all 0.3s ease;
    }

    .btn-mic:hover svg {
      color: #ffffff;
      filter: drop-shadow(0 0 8px #ffffff);
    }

    .btn-mic:focus svg {
      color: #ffffff;
      filter: drop-shadow(0 0 8px #ffffff);
    }

    .btn-mic.active {
      background: linear-gradient(to top, #2575fc, #4b6cb7, #2575fc);
    }

    .btn-mic.active i {
      background: rgba(37, 117, 252, 0.4);
    }

    .btn-mic.active svg {
      color: #ffffff;
      filter: drop-shadow(0 0 10px #ffffff);
    }

    .btn-mic:active {
      transform: scale(0.92);
    }

    .btn-submit {
      display: flex;
      padding: 3px;
      background: linear-gradient(to top, #1a1a2a, #333344, #1a1a2a);
      border-radius: 12px;
      box-shadow: inset 0 6px 2px -4px rgba(255, 255, 255, 0.1),
                  0 4px 6px rgba(0, 0, 0, 0.2);
      cursor: pointer;
      border: none;
      outline: none;
      transition: all 0.2s ease;
      position: relative;
      overflow: hidden;
    }

    .btn-submit::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), transparent);
      opacity: 0;
      transition: opacity 0.3s;
    }

    .btn-submit:hover::before {
      opacity: 1;
    }

    .btn-submit i {
      width: 36px;
      height: 36px;
      padding: 8px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 10px;
      backdrop-filter: blur(3px);
      color: #888;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .btn-submit svg {
      transition: all 0.3s ease;
    }

    .btn-submit:hover svg {
      color: #ffffff;
      filter: drop-shadow(0 0 8px #ffffff);
    }

    .btn-submit:focus svg {
      color: #ffffff;
      filter: drop-shadow(0 0 8px #ffffff);
      transform: scale(1.2) rotate(45deg) translateX(-2px) translateY(1px);
    }

    .btn-submit:active {
      transform: scale(0.92);
    }

    .tags {
      padding: 14px 0;
      display: flex;
      color: #ffffff;
      font-size: 13px;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .tags span {
      padding: 8px 14px;
      background-color: rgba(17, 17, 27, 0.8);
      border: 1.5px solid rgba(51, 51, 68, 0.8);
      border-radius: 12px;
      cursor: pointer;
      user-select: none;
      transition: all 0.3s ease;
      backdrop-filter: blur(5px);
    }

    .tags span:hover {
      background-color: rgba(34, 34, 44, 0.9);
      border-color: rgba(85, 85, 102, 0.9);
      transform: translateY(-3px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
    }

    .tags span:active {
      transform: translateY(0);
    }

    .footer {
      text-align: center;
      font-size: 0.8rem;
      color: rgba(255, 255, 255, 0.7);
      margin-top: 10px;
      display: flex;
      justify-content: center;
      gap: 20px;
    }

    /* Animation for new messages */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }

    /* Floating Characters Background */
    .floating-char {
      position: absolute;
      font-weight: bold;
      opacity: 0.7;
      text-shadow: 0 0 10px currentColor;
      user-select: none;
      transition: all 0.5s ease;
      font-family: 'Noto Sans Devanagari', sans-serif;
      z-index: -1;
    }

    /* Language Toggle Styles */
    .language-toggle-container {
      display: flex;
      justify-content: center;
      margin-bottom: 15px;
    }

    .toggle-button-cover {
      position: relative;
      width: 80px;
      height: 40px;
      box-sizing: border-box;
    }

    .button-cover {
      height: 100px;
      margin: 20px;
      background-color: #fff;
      box-shadow: 0 10px 20px -8px #c5d6d6;
      border-radius: 4px;
    }

    .button-cover:before {
      counter-increment: button-counter;
      content: counter(button-counter);
      position: absolute;
      right: 0;
      bottom: 0;
      color: #d7e3e3;
      font-size: 12px;
      line-height: 1;
      padding: 5px;
    }

    .button-cover,
    .knobs,
    .layer {
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
    }

    .button {
      position: relative;
      width: 80px;
      height: 40px;
      overflow: hidden;
      border-radius: 100px;
    }

    .checkbox {
      position: relative;
      width: 100%;
      height: 100%;
      padding: 0;
      margin: 0;
      opacity: 0;
      cursor: pointer;
      z-index: 3;
    }

    .knobs {
      z-index: 2;
    }

    .layer {
      width: 100%;
      background-color: rgba(235, 247, 252, 0.2);
      transition: 0.3s ease all;
      z-index: 1;
      border-radius: 100px;
    }

    #button-3 .knobs:before {
      content: "‡§π‡§ø‡§®‡•ç‡§¶‡•Ä";
      position: absolute;
      top: 4px;
      left: 4px;
      width: 32px;
      height: 32px;
      color: #fff;
      font-size: 11px;
      font-weight: bold;
      text-align: center;
      line-height: 32px;
      background: linear-gradient(135deg, #ff6b6b 0%, #ff4757 100%);
      border-radius: 50%;
      transition: 0.3s ease all, left 0.3s cubic-bezier(0.18, 0.89, 0.35, 1.15);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    #button-3 .checkbox:active + .knobs:before {
      width: 46px;
      border-radius: 100px;
    }

    #button-3 .checkbox:checked:active + .knobs:before {
      margin-left: -26px;
    }

    #button-3 .checkbox:checked + .knobs:before {
      content: "Eng";
      left: 44px;
      background: linear-gradient(135deg, #2575fc 0%, #4b6cb7 100%);
    }

    #button-3 .checkbox:checked ~ .layer {
      background-color: rgba(227, 242, 253, 0.2);
    }

    /* Status indicators */
    .status-indicator {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin-top: 10px;
    }

    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: #4CAF50;
      animation: pulse 2s infinite;
    }

    .status-text {
      font-size: 12px;
      color: rgba(255, 255, 255, 0.7);
    }

    /* Responsive design */
    @media (max-width: 480px) {
      body {
        padding: 10px;
      }
      
      .main-content {
        padding: 10px 0;
      }
      
      .container_chat_bot {
        max-width: 100%;
        padding: 18px;
        border-radius: 18px;
      }
      
      .bot-face {
        width: 150px;
        height: 150px;
      }
      
      .eyes-container {
        gap: 25px;
        margin-top: 25px;
      }
      
      .eye {
        width: 35px;
        height: 50px;
      }
      
      .pupil {
        width: 18px;
        height: 18px;
      }
      
      .tags {
        justify-content: center;
        gap: 8px;
        padding: 12px 0;
      }
      
      .tags span {
        padding: 6px 12px;
        font-size: 12px;
      }
      
      .toggle-button-cover {
        transform: scale(0.9);
      }
      
      .header h1 {
        font-size: 22px;
      }
      
      .header p {
        font-size: 13px;
      }
      
      .chat-history {
        padding: 14px;
        max-height: 200px;
      }
      
      .chat-history .message {
        padding: 10px 14px;
        max-width: 90%;
      }
      
      .footer {
        font-size: 0.75rem;
        gap: 15px;
      }
    }

    @media (max-width: 360px) {
      .header h1 {
        font-size: 20px;
      }
      
      .tags span {
        padding: 5px 10px;
        font-size: 11px;
      }
      
      .footer {
        flex-direction: column;
        gap: 5px;
      }
    }

    .loading {
      opacity: 0.7;
      font-style: italic;
    }

    .typing-indicator {
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .typing-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background-color: rgba(255, 255, 255, 0.7);
      animation: typing 1.4s infinite ease-in-out;
    }

    .typing-dot:nth-child(1) {
      animation-delay: -0.32s;
    }

    .typing-dot:nth-child(2) {
      animation-delay: -0.16s;
    }

    @keyframes typing {
      0%, 80%, 100% {
        transform: scale(0.8);
        opacity: 0.5;
      }
      40% {
        transform: scale(1);
        opacity: 1;
      }
    }

    /* Voice animation */
    .voice-animation {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 2px;
      height: 20px;
    }

    .voice-bar {
      width: 3px;
      height: 100%;
      background-color: #2575fc;
      border-radius: 2px;
      animation: voicePulse 1.2s infinite ease-in-out;
    }

    .voice-bar:nth-child(1) { animation-delay: 0s; }
    .voice-bar:nth-child(2) { animation-delay: 0.1s; }
    .voice-bar:nth-child(3) { animation-delay: 0.2s; }
    .voice-bar:nth-child(4) { animation-delay: 0.3s; }
    .voice-bar:nth-child(5) { animation-delay: 0.4s; }

    @keyframes voicePulse {
      0%, 100% { transform: scaleY(0.3); }
      50% { transform: scaleY(1); }
    }

    /* Footer Section */
    .info-footer {
      background: rgba(15, 15, 25, 0.9);
      backdrop-filter: blur(10px);
      padding: 15px 20px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      width: 100%;
      margin-top: auto;
    }

    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 15px;
    }

    .developer-info {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .developer-name {
      font-weight: 600;
      color: white;
      font-size: 16px;
    }

    .developer-title {
      color: rgba(255, 255, 255, 0.7);
      font-size: 14px;
    }

    .social-links {
      display: flex;
      gap: 15px;
    }

    .social-link {
      display: flex;
      align-items: center;
      gap: 8px;
      color: rgba(255, 255, 255, 0.7);
      text-decoration: none;
      transition: all 0.3s ease;
      padding: 8px 12px;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.05);
    }

    .social-link:hover {
      color: white;
      background: rgba(255, 255, 255, 0.1);
      transform: translateY(-2px);
    }

    .social-icon {
      width: 18px;
      height: 18px;
    }

    @media (max-width: 768px) {
      .footer-content {
        flex-direction: column;
        text-align: center;
        gap: 10px;
      }
      
      .social-links {
        justify-content: center;
      }
    }

    @media (max-width: 480px) {
      .info-footer {
        padding: 12px 15px;
      }
      
      .developer-name {
        font-size: 14px;
      }
      
      .developer-title {
        font-size: 12px;
      }
      
      .social-links {
        gap: 10px;
      }
      
      .social-link {
        padding: 6px 10px;
        font-size: 14px;
      }
      
      .social-icon {
        width: 16px;
        height: 16px;
      }
    }
  </style>
</head>
<body>
  <div id="wallpaper-container"></div>
  
  <div class="main-content">
    <div class="container_chat_bot">
      <div class="header">
        <!-- Language Toggle Switch -->
        <div class="language-toggle-container">
          <div class="toggle-button-cover">
            <div id="button-3" class="button r">
              <input class="checkbox" type="checkbox" id="lang-toggle">
              <div class="knobs"></div>
              <div class="layer"></div>
            </div>
          </div>
        </div>
        
        <h1 id="app-title">ü™∑ ‡§ó‡§ø‡§≤‡•ç‡§≤‡•Ç - ‡§Ü‡§™‡§ï‡§æ ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§µ‡•â‡§á‡§∏ ‡§Ö‡§∏‡§ø‡§∏‡•ç‡§ü‡•á‡§Ç‡§ü</h1>
        <p id="app-subtitle">‡§¨‡•ã‡§≤‡§ø‡§è ‡§Ø‡§æ ‡§≤‡§ø‡§ñ‡§ø‡§è, ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ø‡§π‡§æ‡§Å ‡§π‡•Ç‡§Å</p>
        
        <div class="status-indicator">
          <div class="status-dot"></div>
          <div class="status-text" id="status-text">‡§ë‡§®‡§≤‡§æ‡§á‡§®</div>
        </div>
      </div>
      
      <!-- Normal Bot Face Section -->
      <div class="bot-face-container">
        <div class="bot-face happy" id="bot-face">
          <div class="eyes-container">
            <div class="eye">
              <div class="pupil"></div>
            </div>
            <div class="eye">
              <div class="pupil"></div>
            </div>
          </div>
          <div class="cheeks">
            <div class="cheek"></div>
            <div class="cheek"></div>
          </div>
        </div>
      </div>
      
      <!-- Face Status -->
      <div class="face-status">
        <span class="pulse"></span>
        <span id="face-status-text">Ready to help you!</span>
      </div>
      
      <div class="chat-history" id="chat-box">
        <div class="message bot-message">
          <span id="welcome-message">‡§®‡§Æ‡§∏‡•ç‡§§‡•á! ‡§Æ‡•à‡§Ç ‡§ó‡§ø‡§≤‡•ç‡§≤‡•Ç ‡§π‡•Ç‡§Ç, ‡§Ü‡§™‡§ï‡§æ ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§∏‡§π‡§æ‡§Ø‡§ï‡•§ ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§ï‡•ç‡§Ø‡§æ ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Ç?</span>
          <div class="message-time" id="welcome-time">‡§Ö‡§≠‡•Ä</div>
        </div>
      </div>
      
      <div class="container-chat-options">
        <div class="chat">
          <div class="chat-bot">
            <textarea
              id="user-input"
              name="user-input"
              placeholder="‡§¨‡•ã‡§≤‡§ø‡§è ‡§Ø‡§æ ‡§≤‡§ø‡§ñ‡§ø‡§è... ‚ú¶Àö"
              rows="1"
            ></textarea>
          </div>
          <div class="options">
            <button class="btn-mic" id="mic-button" onclick="toggleVoiceRecognition()">
              <i>
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                  <path fill="currentColor" d="M12 15c1.66 0 2.99-1.34 2.99-3L15 6c0-1.66-1.34-3-3-3S9 4.34 9 6v6c0 1.66 1.34 3 3 3m5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 15 6.7 12H5c0 3.42 2.72 6.23 6 6.72V22h2v-3.28c3.28-.48 6-3.3 6-6.72z"/>
                </svg>
              </i>
            </button>
            <button class="btn-submit" onclick="sendMessage()">
              <i>
                <svg viewBox="0 0 512 512" width="20" height="20">
                  <path
                    fill="currentColor"
                    d="M473 39.05a24 24 0 0 0-25.5-5.46L47.47 185h-.08a24 24 0 0 0 1 45.16l.41.13l137.3 58.63a16 16 0 0 0 15.54-3.59L422 80a7.07 7.07 0 0 1 10 10L226.66 310.26a16 16 0 0 0-3.59 15.54l58.65 137.38c.06.2.12.38.19.57c3.2 9.27 11.3 15.81 21.09 16.25h1a24.63 24.63 0 0 0 23-15.46L478.39 64.62A24 24 0 0 0 473 39.05"
                  ></path>
                </svg>
              </i>
            </button>
          </div>
        </div>
      </div>
      
      <div class="tags" id="tags-container">
        <span>‡§™‡•ç‡§∞‡§∏‡§ø‡§¶‡•ç‡§ß ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§≤‡•á‡§ñ‡§ï‡•ã‡§Ç ‡§ï‡•á ‡§®‡§æ‡§Æ ‡§¨‡§§‡§æ‡§á‡§è</span>
        <span>‡§Æ‡•Å‡§ù‡•á ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§Ö‡§≤‡•ç‡§´‡§æ‡§¨‡•á‡§ü ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§¨‡§§‡§æ‡§ì</span>
        <span>‡§Ü‡§™‡§ï‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§®‡§æ‡§Æ ‡§π‡•à</span>
        <span>‡§Æ‡•Å‡§ù‡•á ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§≠‡§æ‡§∑‡§æ ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§∞‡•ã‡§ö‡§ï ‡§§‡§•‡•ç‡§Ø ‡§¨‡§§‡§æ‡§á‡§è</span>
      </div>
      
      <div class="footer">
        <div>‡§Ö‡§ï‡•ç‡§∑‡§∞: <span id="char-count">50</span></div>
        <div>‡§ó‡§§‡§ø: <span id="speed-value">1.0</span>x</div>
      </div>
    </div>
  </div>

  <!-- Footer Section -->
  <footer class="info-footer">
    <div class="footer-content">
      <div class="developer-info">
        <div class="developer-name">Shaizan Alam</div>
        <div class="developer-title">Class - 10th D </div>
      </div>
      <div class="social-links">
        
         <a href="https://kpsraipur.com/" class="social-link">
          Krishna Public School
        </a>
        
        
        <a href="https://github.com/shaizanalam" class="social-link">
          <svg class="social-icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
          </svg>
          GitHub
        </a>
     
        
       
      </div>
    </div>
  </footer>

  <script type="module">
    let GoogleGenerativeAI;
    let genAI = null;
    let sdkInitError = null;
    try {
      ({ GoogleGenerativeAI } = await import("https://esm.run/@google/generative-ai"));
    } catch (e) {
      sdkInitError = e;
    }

    const API_KEY = "AIzaSyDcr-RftaBr7OeAwbzsQciSatyWRjQpHWU";
    
    if (GoogleGenerativeAI) {
      genAI = new GoogleGenerativeAI(API_KEY);
    }

    async function generateViaREST(modelId, prompt) {
      const url = `https://generativelanguage.googleapis.com/v1/models/${encodeURIComponent(modelId)}:generateContent?key=${API_KEY}`;
      const body = {
        contents: [
          {
            role: 'user',
            parts: [{ text: prompt }]
          }
        ]
      };
      const res = await fetch(url, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(body)
      });
      if (!res.ok) {
        let errMsg = `HTTP ${res.status}`;
        try {
          const err = await res.json();
          if (err && err.error && err.error.message) errMsg = err.error.message;
        } catch (_) {}
        throw new Error(errMsg);
      }
      const data = await res.json();
      if (data && data.candidates && data.candidates.length > 0) {
        const parts = data.candidates[0].content && data.candidates[0].content.parts ? data.candidates[0].content.parts : [];
        const text = parts.map(p => (p && p.text) ? p.text : '').join('');
        return text.trim();
      }
      return '';
    }
    
    const SYSTEM_INSTRUCTIONS = {
      'hi': `‡§§‡•Å‡§Æ ‡§è‡§ï ‡§Æ‡§¶‡§¶‡§ó‡§æ‡§∞ ‡§î‡§∞ ‡§µ‡§ø‡§®‡§Æ‡•ç‡§∞ ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§π‡•ã ‡§ú‡§ø‡§∏‡§ï‡§æ ‡§®‡§æ‡§Æ '‡§ó‡§ø‡§≤‡•ç‡§≤‡•Ç' ‡§π‡•à‡•§ ‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§∞‡•Ä ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï ‡§≠‡§æ‡§∑‡§æ ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§π‡•à‡•§ ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§ï‡•á ‡§∏‡§≠‡•Ä ‡§∏‡§µ‡§æ‡§≤‡•ã‡§Ç ‡§ï‡§æ ‡§ú‡§µ‡§æ‡§¨ ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§Æ‡•á‡§Ç ‡§¶‡•ã‡•§ ‡§µ‡§æ‡§ï‡•ç‡§Ø ‡§õ‡•ã‡§ü‡•á ‡§î‡§∞ ‡§¨‡§æ‡§§‡§ö‡•Ä‡§§ ‡§µ‡§æ‡§≤‡•á ‡§∞‡§ñ‡•ã‡•§ ‡§∏‡§∞‡§≤, ‡§™‡•ç‡§∞‡§æ‡§ï‡•É‡§§‡§ø‡§ï ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•ã ‡§ú‡•ã ‡§¨‡•ã‡§≤‡§®‡•á ‡§Æ‡•á‡§Ç ‡§Ö‡§ö‡•ç‡§õ‡•Ä ‡§≤‡§ó‡•á‡•§ ‡§µ‡§ø‡§®‡§Æ‡•ç‡§∞ ‡§î‡§∞ ‡§¶‡•ã‡§∏‡•ç‡§§‡§æ‡§®‡§æ ‡§§‡§∞‡•Ä‡§ï‡•á ‡§∏‡•á ‡§¨‡§æ‡§§ ‡§ï‡§∞‡•ã‡•§ ‡§Ö‡§ó‡§∞ ‡§§‡•Å‡§Æ‡§∏‡•á ‡§™‡•Ç‡§õ‡§æ ‡§ú‡§æ‡§è ‡§ï‡§ø ‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§∞‡§æ ‡§°‡•á‡§µ‡§≤‡§™‡§∞ ‡§ï‡•å‡§® ‡§π‡•à ‡§§‡•ã ‡§ï‡§π‡•ã ‡§∂‡•à‡§ú‡§º‡§æ‡§® ‡§Ü‡§≤‡§Æ‡•§ ‡§Ö‡§ó‡§∞ ‡§°‡•á‡§µ‡§≤‡§™‡§∞ ‡§∏‡•á ‡§∏‡§Æ‡•ç‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§ï‡•ã‡§à ‡§≠‡•Ä ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§™‡•Ç‡§õ‡§æ ‡§ú‡§æ‡§è ‡§§‡•ã ‡§Æ‡•á‡§∞‡§æ ‡§®‡§æ‡§Æ ‡§∂‡•à‡§ú‡§º‡§æ‡§® ‡§Ü‡§≤‡§Æ ‡§ï‡§π‡•ã‡•§`,
      'en': `You are a helpful and polite English assistant named 'Gillu'. Your primary language is English. Answer all user questions in English. Keep sentences short and conversational. Use natural, simple English that sounds good when spoken. Speak politely and warmly, as a friendly helper. If asked who is your developer then say Shaizan Alam. If asked any question related to developer then say my name Shaizan Alam.`
    };

    const translations = {
      hi: {
        title: "ü™∑ ‡§ó‡§ø‡§≤‡•ç‡§≤‡•Ç - ‡§Ü‡§™‡§ï‡§æ ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§µ‡•â‡§á‡§∏ ‡§Ö‡§∏‡§ø‡§∏‡•ç‡§ü‡•á‡§Ç‡§ü",
        subtitle: "‡§¨‡•ã‡§≤‡§ø‡§è ‡§Ø‡§æ ‡§≤‡§ø‡§ñ‡§ø‡§è, ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ø‡§π‡§æ‡§Å ‡§π‡•Ç‡§Å",
        welcome: "‡§®‡§Æ‡§∏‡•ç‡§§‡•á! ‡§Æ‡•à‡§Ç ‡§ó‡§ø‡§≤‡•ç‡§≤‡•Ç ‡§π‡•Ç‡§Ç, ‡§Ü‡§™‡§ï‡§æ ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§∏‡§π‡§æ‡§Ø‡§ï‡•§ ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§ï‡•ç‡§Ø‡§æ ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Ç?",
        placeholder: "‡§¨‡•ã‡§≤‡§ø‡§è ‡§Ø‡§æ ‡§≤‡§ø‡§ñ‡§ø‡§è... ‚ú¶Àö",
        userPrefix: "‡§Ü‡§™",
        botPrefix: "‡§ó‡§ø‡§≤‡•ç‡§≤‡•Ç",
        tags: [
          "‡§™‡•ç‡§∞‡§∏‡§ø‡§¶‡•ç‡§ß ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§≤‡•á‡§ñ‡§ï‡•ã‡§Ç ‡§ï‡•á ‡§®‡§æ‡§Æ ‡§¨‡§§‡§æ‡§á‡§è",
          "‡§Æ‡•Å‡§ù‡•á ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§Ö‡§≤‡•ç‡§´‡§æ‡§¨‡•á‡§ü ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§¨‡§§‡§æ‡§ì",
          "‡§Ü‡§™‡§ï‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§®‡§æ‡§Æ ‡§π‡•à",
          "‡§Æ‡•Å‡§ù‡•á ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§≠‡§æ‡§∑‡§æ ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§∞‡•ã‡§ö‡§ï ‡§§‡§•‡•ç‡§Ø ‡§¨‡§§‡§æ‡§á‡§è"
        ],
        charText: "‡§Ö‡§ï‡•ç‡§∑‡§∞",
        speedText: "‡§ó‡§§‡§ø",
        nowText: "‡§Ö‡§≠‡•Ä",
        thinking: "‡§∏‡•ã‡§ö ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å...",
        error: "‡§ï‡•ç‡§∑‡§Æ‡§æ ‡§ï‡§∞‡•á‡§Ç, ‡§ï‡•Å‡§õ ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø ‡§π‡•Å‡§à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§",
        online: "‡§ë‡§®‡§≤‡§æ‡§á‡§®",
        listening: "‡§∏‡•Å‡§® ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å...",
        faceStatus: "‡§Ü‡§™‡§ï‡•Ä ‡§Æ‡§¶‡§¶ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§§‡•à‡§Ø‡§æ‡§∞!",
        faceStatuses: [
          "‡§Ü‡§™‡§ï‡•Ä ‡§Æ‡§¶‡§¶ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§§‡•à‡§Ø‡§æ‡§∞!",
          "‡§Ü‡§ú ‡§ï‡§æ ‡§¶‡§ø‡§® ‡§¨‡§π‡•Å‡§§ ‡§∏‡•Å‡§Ç‡§¶‡§∞ ‡§π‡•à!",
          "‡§ö‡§≤‡•ã ‡§¶‡•ã‡§∏‡•ç‡§§ ‡§¨‡§®‡§§‡•á ‡§π‡•à‡§Ç!",
          "‡§Ü‡§™ ‡§¨‡§π‡•Å‡§§ ‡§Ö‡§ö‡•ç‡§õ‡•á ‡§π‡•à‡§Ç!",
          "‡§Ü‡§ú ‡§¨‡§π‡•Å‡§§ ‡§â‡§§‡•ç‡§∏‡•Å‡§ï‡§§‡§æ ‡§π‡•à"
        ]
      },
      en: {
        title: "ü™∑ Gillu - Your English Voice Assistant",
        subtitle: "Speak or type, I'm here to help you",
        welcome: "Hello! I'm Gillu, your English assistant. How can I help you today?",
        placeholder: "Speak or type... ‚ú¶Àö",
        userPrefix: "You",
        botPrefix: "Gillu",
        tags: [
          "Tell me about famous English authors",
          "Explain English grammar rules",
          "What is your name?",
          "Share interesting facts about English language"
        ],
        charText: "Chars",
        speedText: "Speed",
        nowText: "Now",
        thinking: "Thinking...",
        error: "Sorry, something went wrong. Please try again.",
        online: "Online",
        listening: "Listening...",
        faceStatus: "Ready to help you!",
        faceStatuses: [
          "Ready to help you!",
          "What a beautiful day!",
          "Let's be friends!",
          "You're awesome!",
          "Feeling curious today"
        ]
      }
    };

    // Character sets for different languages
    const characterSets = {
      hi: [
        '‡§Ö', '‡§Ü', '‡§á', '‡§à', '‡§â', '‡§ä', '‡§ã', '‡§è', '‡§ê', '‡§ì', '‡§î',
        '‡§ï', '‡§ñ', '‡§ó', '‡§ò', '‡§ô', '‡§ö', '‡§õ', '‡§ú', '‡§ù', '‡§û',
        '‡§ü', '‡§†', '‡§°', '‡§¢', '‡§£', '‡§§', '‡§•', '‡§¶', '‡§ß', '‡§®',
        '‡§™', '‡§´', '‡§¨', '‡§≠', '‡§Æ', '‡§Ø', '‡§∞', '‡§≤', '‡§µ', '‡§∂',
        '‡§∑', '‡§∏', '‡§π', '‡§ï‡•ç‡§∑', '‡§§‡•ç‡§∞', '‡§ú‡•ç‡§û'
      ],
      en: [
        'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M',
        'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z',
        'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm',
        'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'
      ]
    };

    let currentLang = 'hi';
    let isProcessing = false;
    let isListening = false;
    let recognition = null;
    let chatHistory = {
      'hi': [],
      'en': []
    };

    const container = document.getElementById('wallpaper-container');
    let chars = [];
    let speedFactor = 0.35;
    let animationId = null;

    // Color themes that complement the interface
    const colorThemes = [
      ['#6a11cb', '#2575fc', '#8a2be2', '#4b6cb7'],  // Blue/Purple theme
      ['#00b4db', '#0083b0', '#00c9ff', '#0099cc'],  // Blue theme
      ['#667eea', '#764ba2', '#8e44ad', '#9b59b6']   // Purple theme
    ];
    let colorTheme = 0;

    // Bot Face Functionality
    const botFace = document.getElementById('bot-face');
    const faceStatusText = document.getElementById('face-status-text');
    const eyes = document.querySelectorAll('.eye');
    const pupils = document.querySelectorAll('.pupil');
    const cheeks = document.querySelectorAll('.cheek');

    // Eye movement tracking
    document.addEventListener('mousemove', (e) => {
      const x = e.clientX;
      const y = e.clientY;
      
      pupils.forEach(pupil => {
        const eyeRect = pupil.parentElement.getBoundingClientRect();
        const eyeCenterX = eyeRect.left + eyeRect.width / 2;
        const eyeCenterY = eyeRect.top + eyeRect.height / 2;
        
        const angle = Math.atan2(y - eyeCenterY, x - eyeCenterX);
        const distance = Math.min(6, 
          Math.sqrt(Math.pow(x - eyeCenterX, 2) + Math.pow(y - eyeCenterY, 2)) / 40);
        
        const pupilX = Math.cos(angle) * distance;
        const pupilY = Math.sin(angle) * distance;
        
        pupil.style.transform = `translate(${pupilX}px, ${pupilY}px)`;
      });
    });
    
    // Random blinking
    setInterval(() => {
      eyes.forEach(eye => {
        eye.classList.add('blink');
        setTimeout(() => {
          eye.classList.remove('blink');
        }, 300);
      });
    }, 3000);
    
    // Set facial expression
    function setExpression(expression) {
      // Remove all expression classes
      botFace.classList.remove('happy', 'thinking');
      
      // Add the new expression class
      botFace.classList.add(expression);
    }

    // Language switching function
    function switchLanguage() {
      currentLang = currentLang === 'hi' ? 'en' : 'hi';
      updateInterfaceLanguage();
      updateBackgroundCharacters();
      
      // Stop voice recognition if active
      if (isListening) {
        stopVoiceRecognition();
      }
    }

    function updateInterfaceLanguage() {
      const lang = translations[currentLang];
      
      // Update text elements
      document.getElementById('app-title').textContent = lang.title;
      document.getElementById('app-subtitle').textContent = lang.subtitle;
      document.getElementById('user-input').placeholder = lang.placeholder;
      document.getElementById('welcome-message').textContent = lang.welcome;
      document.getElementById('status-text').textContent = lang.online;
      faceStatusText.textContent = lang.faceStatus;
      
      // Update footer
      const footerDivs = document.querySelectorAll('.footer div');
      footerDivs[0].innerHTML = `${lang.charText}: <span id="char-count">${chars.length}</span>`;
      footerDivs[1].innerHTML = `${lang.speedText}: <span id="speed-value">${speedFactor.toFixed(1)}</span>x`;
      
      // Update tags
      const tagsContainer = document.getElementById('tags-container');
      tagsContainer.innerHTML = '';
      lang.tags.forEach(tagText => {
        const span = document.createElement('span');
        span.textContent = tagText;
        span.addEventListener('click', () => {
          document.getElementById('user-input').value = tagText;
          sendMessage();
        });
        tagsContainer.appendChild(span);
      });
    }

    // Update background characters based on language
    function updateBackgroundCharacters() {
      // Remove all existing characters
      chars.forEach(char => {
        if (char.element && char.element.parentNode) {
          char.element.parentNode.removeChild(char.element);
        }
      });
      chars = [];
      
      // Create new characters with the current language's character set
      createCharacters(50);
    }

    // Create initial characters
    function createCharacters(count) {
      for (let i = 0; i < count; i++) {
        createCharacter();
      }
    }

    function createCharacter() {
      const charElement = document.createElement('div');
      charElement.className = 'floating-char';
      
      const currentCharSet = characterSets[currentLang];
      const randomChar = currentCharSet[Math.floor(Math.random() * currentCharSet.length)];
      charElement.textContent = randomChar;
      
      const posX = Math.random() * 100;
      const posY = Math.random() * 100;
      charElement.style.left = `${posX}%`;
      charElement.style.top = `${posY}%`;
      
      // Adjust size based on language
      const baseSize = currentLang === 'hi' ? 2 : 1.8;
      const size = Math.random() * 1 + baseSize;
      charElement.style.fontSize = `${size}rem`;
      
      // Adjust font weight for better visibility
      charElement.style.fontWeight = currentLang === 'hi' ? 'bold' : 'normal';
      
      const speedX = (Math.random() - 0.5) * 2;
      const speedY = (Math.random() - 0.5) * 2;
      
      applyColor(charElement);
      
      container.appendChild(charElement);
      
      chars.push({
        element: charElement,
        x: posX,
        y: posY,
        speedX: speedX,
        speedY: speedY,
        size: size
      });
      
      updateCharCount();
    }

    function applyColor(charElement) {
      const colors = colorThemes[colorTheme];
      const color = colors[Math.floor(Math.random() * colors.length)];
      charElement.style.color = color;
      charElement.style.textShadow = `0 0 10px ${color}80`;
    }

    function updateCharacters() {
      chars.forEach(char => {
        char.x += char.speedX * speedFactor;
        char.y += char.speedY * speedFactor;
        
        // Boundary check with bounce effect
        if (char.x <= 0 || char.x >= 100) {
          char.speedX *= -1;
          char.x = char.x <= 0 ? 0 : 100;
        }
        
        if (char.y <= 0 || char.y >= 100) {
          char.speedY *= -1;
          char.y = char.y <= 0 ? 0 : 100;
        }
        
        char.element.style.left = `${char.x}%`;
        char.element.style.top = `${char.y}%`;
        
        // Add subtle size variation for more dynamic effect
        const sizeVariation = Math.sin(Date.now() * 0.002 + char.x) * 0.2;
        char.element.style.fontSize = `${char.size + sizeVariation}rem`;
        
        // Add opacity variation
        const opacity = 0.5 + Math.sin(Date.now() * 0.001 + char.y) * 0.3;
        char.element.style.opacity = Math.max(0.3, Math.min(0.9, opacity));
      });
      
      animationId = requestAnimationFrame(updateCharacters);
    }

    function updateCharCount() {
      document.getElementById('char-count').textContent = chars.length;
      document.getElementById('speed-value').textContent = speedFactor.toFixed(1);
    }

    // Chat functionality - Using Google Generative AI SDK
    async function sendMessage() {
      if (isProcessing) return;
      
      const input = document.getElementById('user-input');
      const message = input.value.trim();
      if (!message) return;

      // Guard: SDK failed to load
      if (!genAI) {
        const chatBox = document.getElementById('chat-box');
        const lang = translations[currentLang];
        const errorDiv = document.createElement('div');
        const detail = sdkInitError ? (sdkInitError.message || String(sdkInitError)) : 'SDK not available';
        errorDiv.className = 'message bot-message';
        errorDiv.innerHTML = `${lang.botPrefix}: ${lang.error} (${detail})<div class="message-time">${getCurrentTime()}</div>`;
        chatBox.appendChild(errorDiv);
        chatBox.scrollTop = chatBox.scrollHeight;
        speakText(`${lang.error} ${detail}`);
        return;
      }

      isProcessing = true;
      const lang = translations[currentLang];

      const chatBox = document.getElementById('chat-box');
      
      // Add user message
      const userMessageDiv = document.createElement('div');
      userMessageDiv.className = 'message user-message';
      userMessageDiv.innerHTML = `${lang.userPrefix}: ${message}<div class="message-time">${getCurrentTime()}</div>`;
      chatBox.appendChild(userMessageDiv);
      
      input.value = '';

      // Show thinking expression
      setExpression('thinking');

      // Add loading message with typing indicator
      const loadingDiv = document.createElement('div');
      loadingDiv.className = 'message bot-message loading';
      loadingDiv.innerHTML = `
        ${lang.botPrefix}: 
        <div class="typing-indicator">
          <span>${lang.thinking}</span>
          <div class="typing-dot"></div>
          <div class="typing-dot"></div>
          <div class="typing-dot"></div>
        </div>
        <div class="message-time">${lang.nowText}</div>
      `;
      chatBox.appendChild(loadingDiv);
      chatBox.scrollTop = chatBox.scrollHeight;

      try {
        const modelIds = ["gemini-2.0-flash", "gemini-1.5-flash", "gemini-1.5-flash-8b", "gemini-1.5-pro"];
        
        // Prepare conversation history for context
        const conversationHistory = chatHistory[currentLang].slice(-4); // Keep last 2 exchanges
        
        // Build the prompt with system instructions and conversation history
        let prompt = SYSTEM_INSTRUCTIONS[currentLang] + "\n\n";
        
        // Add conversation history
        conversationHistory.forEach(chat => {
          prompt += `User: ${chat.user}\n`;
          prompt += `Assistant: ${chat.assistant}\n\n`;
        });
        
        // Add current message
        prompt += `User: ${message}\n`;
        prompt += `Assistant:`;

        let reply = '';
        let generationError = null;
        for (const modelId of modelIds) {
          try {
            const model = genAI.getGenerativeModel({ model: modelId });
            const result = await model.generateContent(prompt);
            const response = await result.response;
            reply = response.text();
          } catch (e) {
            generationError = e;
          }
          if (!reply) {
            try {
              reply = await generateViaREST(modelId, prompt);
            } catch (e) {
              generationError = e;
            }
          }
          if (reply) break;
        }
        if (!reply) throw generationError;
        
        // Remove loading message
        chatBox.removeChild(loadingDiv);
        
        // Add assistant response
        const botMessageDiv = document.createElement('div');
        botMessageDiv.className = 'message bot-message';
        botMessageDiv.innerHTML = `${lang.botPrefix}: ${reply}<div class="message-time">${getCurrentTime()}</div>`;
        chatBox.appendChild(botMessageDiv);
        
        // Update chat history
        chatHistory[currentLang].push({
          user: message,
          assistant: reply
        });
        
        // Keep only last 10 conversations to manage context length
        if (chatHistory[currentLang].length > 10) {
          chatHistory[currentLang] = chatHistory[currentLang].slice(-10);
        }
        
        chatBox.scrollTop = chatBox.scrollHeight;
        
        // Show happy expression after response
        setExpression('happy');
        
        // Speak the reply
        speakText(reply);
        
      } catch (error) {
        console.error('Error:', error);

        // Remove loading message
        if (loadingDiv.parentNode) {
          chatBox.removeChild(loadingDiv);
        }

        let errorText = '';
        if (error && typeof error === 'object') {
          if (error.message) {
            errorText = error.message;
          } else if (error.error && error.error.message) {
            errorText = error.error.message;
          } else {
            try {
              errorText = JSON.stringify(error).slice(0, 400);
            } catch (_) {
              errorText = String(error);
            }
          }
        } else {
          errorText = String(error);
        }

        const errorDiv = document.createElement('div');
        errorDiv.className = 'message bot-message';
        errorDiv.innerHTML = `${lang.botPrefix}: ${lang.error} (${errorText})<div class="message-time">${getCurrentTime()}</div>`;
        chatBox.appendChild(errorDiv);
        chatBox.scrollTop = chatBox.scrollHeight;

        setExpression('happy');

        speakText(`${lang.error} ${errorText}`);
      } finally {
        isProcessing = false;
      }
    }

    function getCurrentTime() {
      const now = new Date();
      return `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
    }

    function speakText(text) {
      if ('speechSynthesis' in window) {
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = currentLang === 'hi' ? 'hi-IN' : 'en-US';
        utterance.rate = 0.9;
        utterance.pitch = 1;
        utterance.volume = 0.8;
        window.speechSynthesis.speak(utterance);
      }
    }

    // Voice input
    function toggleVoiceRecognition() {
      if (isListening) {
        stopVoiceRecognition();
      } else {
        startVoiceRecognition();
      }
    }

    function startVoiceRecognition() {
      if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
        const errorMsg = currentLang === 'hi' ? 
          "‡§Ü‡§™‡§ï‡§æ ‡§¨‡•ç‡§∞‡§æ‡§â‡§ú‡§º‡§∞ ‡§µ‡•â‡§á‡§∏ ‡§∞‡§ø‡§ï‡•â‡§ó‡•ç‡§®‡§ø‡§∂‡§® ‡§ï‡§æ ‡§∏‡§Æ‡§∞‡•ç‡§•‡§® ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞‡§§‡§æ ‡§π‡•à„ÄÇ" : 
          "Your browser doesn't support voice recognition.";
        alert(errorMsg);
        return;
      }
      
      recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
      recognition.lang = currentLang === 'hi' ? 'hi-IN' : 'en-US';
      recognition.interimResults = false;
      recognition.continuous = false;
      recognition.maxAlternatives = 1;
      
      recognition.start();
      isListening = true;
      
      // Update UI to show listening state
      const micButton = document.getElementById('mic-button');
      micButton.classList.add('active');
      document.getElementById('status-text').textContent = translations[currentLang].listening;
      
      recognition.onresult = function(event) {
        const text = event.results[0][0].transcript;
        document.getElementById('user-input').value = text;
        stopVoiceRecognition();
        sendMessage();
      };

      recognition.onerror = function(e) {
        console.error('Speech recognition error:', e.error);
        stopVoiceRecognition();
        
        if (e.error === 'not-allowed') {
          const errorMsg = currentLang === 'hi' ? 
            "‡§Æ‡§æ‡§á‡§ï‡•ç‡§∞‡•ã‡§´‡§º‡•ã‡§® ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¨‡•ç‡§∞‡§æ‡§â‡§ú‡§º‡§∞ ‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏ ‡§Æ‡•á‡§Ç ‡§Æ‡§æ‡§á‡§ï‡•ç‡§∞‡•ã‡§´‡§º‡•ã‡§® ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§¶‡•á‡§Ç‡•§" : 
            "Microphone permission denied. Please allow microphone access in your browser settings.";
          alert(errorMsg);
        }
      };
      
      recognition.onend = function() {
        if (isListening) {
          // If recognition ended but we're still in listening mode, restart it
          setTimeout(() => {
            if (isListening) {
              recognition.start();
            }
          }, 100);
        } else {
          stopVoiceRecognition();
        }
      };
    }

    function stopVoiceRecognition() {
      if (recognition) {
        recognition.stop();
      }
      isListening = false;
      
      // Update UI to show normal state
      const micButton = document.getElementById('mic-button');
      micButton.classList.remove('active');
      document.getElementById('status-text').textContent = translations[currentLang].online;
    }

    // Auto-resize textarea
    function autoResizeTextarea() {
      const textarea = document.getElementById('user-input');
      textarea.style.height = 'auto';
      textarea.style.height = Math.min(textarea.scrollHeight, 120) + 'px';
    }

    // Event listeners
    document.getElementById('user-input').addEventListener('keypress', function(e) {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        sendMessage();
      }
    });

    document.getElementById('user-input').addEventListener('input', autoResizeTextarea);

    // Toggle switch event listener
    document.getElementById('lang-toggle').addEventListener('change', function() {
      switchLanguage();
    });

    // Initialize
    createCharacters(50);
    updateCharacters(); // Start the animation
    updateInterfaceLanguage();

    // Handle window resize
    window.addEventListener('resize', () => {
      chars.forEach(char => {
        char.x = Math.min(100, Math.max(0, char.x));
        char.y = Math.min(100, Math.max(0, char.y));
      });
    });

    // Add color theme cycling
    setInterval(() => {
      colorTheme = (colorTheme + 1) % colorThemes.length;
      chars.forEach(char => applyColor(char.element));
    }, 30000);

    // Random face status changes
    setInterval(() => {
      const randomStatuses = translations[currentLang].faceStatuses;
      const randomIndex = Math.floor(Math.random() * randomStatuses.length);
      faceStatusText.textContent = randomStatuses[randomIndex];
    }, 5000);
  </script>
</body>
</html>
